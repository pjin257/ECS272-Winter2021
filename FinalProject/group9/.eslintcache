[{"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\index.js":"1","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\App.js":"2","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\reportWebVitals.js":"3","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Threat.js":"4","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Home.js":"5","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Threat_chart.js":"6","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\components\\Header.js":"7","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Alliance.js":"8","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Alliance_chart.js":"9","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Total_alliance.js":"10","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Total_alliance_chart.js":"11","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\GDP.js":"12","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Area.js":"13","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Area2.js":"14","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\AreaChart.js":"15","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\GDP_chart.js":"16","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\AreaChart2.js":"17"},{"size":517,"mtime":1614895946907,"results":"18","hashOfConfig":"19"},{"size":1199,"mtime":1615591298188,"results":"20","hashOfConfig":"19"},{"size":375,"mtime":1614619732891,"results":"21","hashOfConfig":"19"},{"size":1086,"mtime":1615591788375,"results":"22","hashOfConfig":"19"},{"size":222,"mtime":1615596606826,"results":"23","hashOfConfig":"19"},{"size":16033,"mtime":1615342161068,"results":"24","hashOfConfig":"19"},{"size":725,"mtime":1615597467265,"results":"25","hashOfConfig":"19"},{"size":1176,"mtime":1615591825214,"results":"26","hashOfConfig":"19"},{"size":15986,"mtime":1615342191864,"results":"27","hashOfConfig":"19"},{"size":1038,"mtime":1615591982309,"results":"28","hashOfConfig":"19"},{"size":8063,"mtime":1615660538129,"results":"29","hashOfConfig":"19"},{"size":1232,"mtime":1615661934095,"results":"30","hashOfConfig":"19"},{"size":1219,"mtime":1615661229717,"results":"31","hashOfConfig":"19"},{"size":1242,"mtime":1615661613138,"results":"32","hashOfConfig":"19"},{"size":4222,"mtime":1615472892000,"results":"33","hashOfConfig":"19"},{"size":7032,"mtime":1615661933126,"results":"34","hashOfConfig":"19"},{"size":3173,"mtime":1615472892000,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"153vt",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"38"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"38"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"38"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"38"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"38"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\index.js",[],["76","77"],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\App.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\reportWebVitals.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Threat.js",["78"],"import React from 'react';\r\nimport Threat_chart from './Threat_chart';\r\nimport './Threat.css';\r\n\r\nclass Threat extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state ={\r\n      id: \"chart-1\"\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n        <h2>Threat map</h2>\r\n        <div id=\"manual\">\r\n          <p>Explore military disputes of specific countries from 1991 to 2014.</p>\r\n          <p>Click a country to show its information. The blue circle represents the selected country and the red circles represent the countries that had military disputes with the selected one.  The size of each circle shows the relative magnitude of the military expenditure of each country. You can see the names of countries and military expenditures by hovering your mouse on each circle. You can also pan and zoom or click the ocean to reset to the initial state.</p>\r\n        </div>\r\n        <div id = \"vis\">\r\n          <div id=\"container\"> </div>\r\n        </div>\r\n        <Threat_chart/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Threat;\r\n","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Home.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Threat_chart.js",["79","80","81","82","83","84","85","86","87","88","89","90","91","92"],"import React, {Component} from 'react';\r\nimport ccodes from  '../datasets/COW country codes.csv';\r\nimport MIDB from '../datasets/MIDB 5.0.csv';\r\nimport mil from  '../datasets/Military_expenditure.csv';\r\nimport allyDB from '../datasets/alliance_v4.1_by_member.csv';\r\nimport * as d3 from \"d3\";\r\n\r\nclass Threat_chart extends Component{\r\n\r\n    componentDidMount(){\r\n        this.drawChart();\r\n    }\r\n\r\n    drawChart(){\r\n      // load json file for the map\r\n      const topojson_countries = require('../datasets/countries-110m.json');\r\n      \r\n      const topojson = require(\"topojson\");\r\n      const countries_objects = topojson.feature(topojson_countries, topojson_countries.objects.countries);\r\n      const countries = topojson.feature(topojson_countries, topojson_countries.objects.countries).features;\r\n      const mesh_countries = topojson.mesh(topojson_countries, topojson_countries.objects.countries, function(a, b) { return a !== b; });\r\n\r\n      // size of view box\r\n      const dimensions = ({\r\n        width: 600,\r\n        height: 400,\r\n        margin: 50,\r\n      })\r\n\r\n      // map color\r\n      const colors = ({\r\n        stroke_color: \"white\",\r\n        active_color: \"#2c4566\",\r\n        inactive_color: \"#9daabd\",\r\n        background_color: \"#e4e9f0\",\r\n        tooltip_color: \"#21334f\",\r\n        tooltip_background: \"rgba(237, 244, 255, 0.7)\"\r\n      })\r\n\r\n      // packed circle color\r\n      const cc_colors = [\"#004ecc\", \"#c90000\", \"#c7c9ff\", \"#ffa8a8\"]  // friendly, hostile, friedly_background, hostile_background\r\n\r\n      // size\r\n      const size = ({\r\n        width: 300,\r\n        height: 200\r\n      })\r\n\r\n      // Visualize world map\r\n      var svg = d3.select('#container')\r\n        .append('svg')\r\n          .attr(\"viewBox\", [0, 0, dimensions.width, dimensions.height])\r\n          .attr(\"class\", \"globe\")\r\n          .on(\"click\", reset);\r\n\r\n      svg.append(\"rect\")\r\n        .attr(\"width\", dimensions.width)\r\n        .attr(\"height\", dimensions.height)\r\n        .attr(\"fill\", colors.background_color);\r\n\r\n      var projectionMercator = d3.geoEquirectangular()\r\n                                .translate([dimensions.width / 2, dimensions.height / 2])\r\n                                .rotate([0, 0])\r\n                                .fitSize([dimensions.width, dimensions.height], countries_objects);\r\n                                  // note: use topojson objects (w/ type: FeatureCollection) to fitsize\r\n      \r\n      var geoMercator = d3.geoMercator()\r\n                          .center([0, 0])\r\n                          .fitSize([dimensions.width, dimensions.height], countries);\r\n\r\n      var path = d3.geoPath()\r\n                    .projection(projectionMercator);\r\n      \r\n      const zoom = d3.zoom()\r\n                      .scaleExtent([1, 10])\r\n                      .on(\"zoom\", zoomed);\r\n    \r\n      var g = svg.append(\"g\");\r\n\r\n      var tooltip = d3.select(\"body\").append(\"div\")\r\n        .attr(\"class\", \"tooltip\")\r\n    \r\n      g.selectAll(\"path\")\r\n        .data(countries)\r\n        .enter().append(\"path\")\r\n        .attr(\"d\", path)\r\n        .style(\"fill\", colors.inactive_color)\r\n        .attr(\"class\", \"country\")\r\n        .on(\"click\", clicked)\r\n        .on('mouseenter', function(event, d) { \r\n          d3.select(this)\r\n            .transition()\r\n            .delay(100)\r\n            .style(\"fill\", colors.active_color);\r\n          tooltip.html(\r\n              `<div><strong> ${d.properties.name}</strong></div>`)\r\n                .style('visibility', 'visible');\r\n        })\r\n        .on('mouseleave', function(d) { \r\n          d3.select(this)\r\n            .transition()\r\n            .delay(100)\r\n            .style(\"fill\", colors.inactive_color);\r\n          tooltip.html(``).style('visibility', 'hidden');\r\n        })     \r\n        .on('mousemove', function (event, d) {\r\n              tooltip\r\n                .style('top', event.pageY - 10 + 'px')\r\n                .style('left', event.pageX + 10 + 'px');\r\n        });\r\n      \r\n        g.append(\"path\")\r\n          .data(mesh_countries)\r\n          .attr(\"class\", \"mesh\")\r\n          .attr('stroke-linejoin', 'round')\r\n          .style(\"stroke\", colors.stroke_color)\r\n          .style(\"stroke-width\", \"1px\")\r\n          .attr(\"d\", path);\r\n    \r\n      svg.call(zoom);\r\n\r\n      function clicked(event, d) {\r\n        const [[x0, y0], [x1, y1]] = path.bounds(d);\r\n        event.stopPropagation();\r\n\r\n        //remove previous circles\r\n        d3.selectAll(\"circle\").remove();\r\n\r\n        var ccode = 0\r\n        var found = false\r\n\r\n        svg.transition().duration(750).call(\r\n          zoom.transform,\r\n          d3.zoomIdentity\r\n            .translate(dimensions.width / 2, dimensions.height / 2)\r\n            .scale(Math.min(3, 0.9 / Math.max((x1 - x0) / dimensions.width, (y1 - y0) / dimensions.height)))\r\n            .translate(-(x0 + x1) / 2, -(y0 + y1) / 2),\r\n        );\r\n\r\n        /// start preprocessing ///\r\n        // load ccodes data\r\n        d3.csv(ccodes)\r\n          .then(csv => {\r\n            var codemap_dup = csv.map(row => {\r\n              return {\r\n                name: String(row['StateNme']),\r\n                code: String(row['CCode'])\r\n              }\r\n              })\r\n            \r\n            // remove duplicate codes\r\n            var codemap = codemap_dup.reduce((unique, o) => {\r\n              if(!unique.some(obj => obj.name === o.name && obj.code === o.code)) {\r\n                unique.push(o);\r\n              }\r\n              return unique;\r\n            },[]);\r\n\r\n            // find ccode of selected\r\n            codemap.forEach(country =>{\r\n              if (country.name === d.properties.name) {\r\n                found = true\r\n                ccode = country.code\r\n              }\r\n            })\r\n            if (found){\r\n              // search dispute dataset\r\n              d3.csv(MIDB)\r\n                .then(csv =>{\r\n\r\n                  // select meaningful columns\r\n                  var disputes = csv.map(row => {\r\n                    return {\r\n                      dispnum: Number(row['dispnum']),\r\n                      ccode: Number(row['ccode']),\r\n                      styear: Number(row['styear'])\r\n                    }\r\n                  })\r\n\r\n                  // get disputes of the selected country\r\n                  var sel_disp = []                  \r\n\r\n                  disputes.forEach(disp => {\r\n                    if (disp.ccode == ccode && disp.styear > 1990){   // filter disputes after 1990\r\n                      sel_disp.push(disp.dispnum)\r\n                    }\r\n                  })\r\n\r\n                  // get ccodes of hostile countries\r\n                  var threats = new Set()\r\n                  disputes.forEach(disp =>{\r\n                    if (sel_disp.includes(disp.dispnum) && disp.ccode != ccode){\r\n                      threats.add(disp.ccode)\r\n                    }\r\n                  })\r\n\r\n                  // get military expenditure of selected country and threats\r\n                  d3.csv(mil)\r\n                    .then(csv => {             \r\n                      // create data by selecting two columns from csv \r\n                      var entire_mil_exp = csv.map(row => {\r\n                        return {\r\n                          name: String(row['Name']),\r\n                          mil: Number(row['2018'])\r\n                        }\r\n                      })\r\n\r\n                      var formattedData = []\r\n                      // add the selected county itself to formatted data\r\n                      codemap.forEach(cd => {\r\n                        if (ccode == cd.code){\r\n                          // get military expenditure\r\n                          entire_mil_exp.forEach(dat =>{\r\n                            if (dat.name == cd.name) {\r\n                              // add item to chart data\r\n                              formattedData.push({\r\n                                threat: 0,   // not threat, that is, friendly\r\n                                value: dat.mil,\r\n                                name: cd.name\r\n                              })  \r\n                            }\r\n                          })\r\n                        }\r\n                      })\r\n\r\n                      // search alliance dataset\r\n                      d3.csv(allyDB)\r\n                      .then(csv =>{\r\n                        // select meaningful columns\r\n                        var allianceDB_raw = csv.map(row => {\r\n                          return {\r\n                            allyID: Number(row['version4id']),\r\n                            ccode: Number(row['ccode']),\r\n                            styear: Number(row['all_st_year']),\r\n                            type: String(row['ss_type']),\r\n                            endyear: Number(row['all_end_year'])\r\n                          }\r\n                        });\r\n\r\n                        function filter_effective(array) {\r\n                          var effectives = array.filter(alliance => alliance.endyear == \"\")\r\n                          var mutual_defense = effectives.filter(alliance => alliance.type == \"Type I: Defense Pact\" || alliance.type == \"Type III: Entente\")\r\n                          return mutual_defense;\r\n                          }\r\n                        \r\n                        // filter still effective and about mutual defense alliances\r\n                        var allianceDB_dup = filter_effective(allianceDB_raw);\r\n                        \r\n                        // remove duplicate data\r\n                        var allianceDB = allianceDB_dup.reduce((unique, o) => {\r\n                          if(!unique.some(obj => obj.allyID === o.allyID && obj.ccode === o.ccode)) {\r\n                            unique.push(o);\r\n                          }\r\n                          return unique;\r\n                        },[]);\r\n\r\n                        console.log(allianceDB)\r\n                        \r\n                        // get alliances of selected country\r\n                        var sel_alli = [];\r\n\r\n                        allianceDB.forEach(alli => {\r\n                          if (alli.ccode == ccode){\r\n                            sel_alli.push(alli.allyID)\r\n                          }\r\n                        })\r\n\r\n                        console.log(sel_alli)\r\n\r\n                        // get ccode of allied countries\r\n                        var alliances = new Set();\r\n                        allianceDB.forEach(alli => {\r\n                          if (sel_alli.includes(alli.allyID) && alli.ccode != ccode){\r\n                            alliances.add(alli.ccode)\r\n                          }  \r\n                        })\r\n\r\n                        console.log(alliances)\r\n\r\n                        var alli_list = []\r\n                        // for each allied country\r\n                        alliances.forEach(country =>{\r\n                          // map ccode to name\r\n                          codemap.forEach(cd => {\r\n                            if (country == cd.code){\r\n                              // get name\r\n                              entire_mil_exp.forEach(dat =>{\r\n                                if (dat.name == cd.name) {\r\n                                  // add item to allies\r\n                                  alli_list.push({\r\n                                    threat: 0,\r\n                                    name: cd.name\r\n                                  })  \r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        })  \r\n\r\n                        console.log(alli_list)\r\n                        // for each threat country\r\n                        threats.forEach(country =>{                        \r\n                          // map ccode to name\r\n                          codemap.forEach(cd => {\r\n                            if (country == cd.code){\r\n                              // get military expenditure\r\n                              entire_mil_exp.forEach(dat =>{\r\n                                var hostile = true \r\n                                alli_list.forEach(friendly => {\r\n                                  // don't add friendly countries to threats\r\n                                  if (Object.values(friendly).includes(dat.name)){ \r\n                                    hostile = false\r\n                                  }\r\n                                })\r\n                                if (dat.name == cd.name && hostile) {\r\n                                  // add item to formatted data\r\n                                  formattedData.push({\r\n                                    threat: 1,\r\n                                    value: dat.mil,\r\n                                    name: cd.name\r\n                                  })  \r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        })\r\n\r\n                        // convert to chart data format\r\n                        var chartData = ({\r\n                          children: Array.from(\r\n                            d3.group(\r\n                              formattedData,\r\n                              d => d.threat\r\n                            ),\r\n                            ([, children]) => ({children})\r\n                          )\r\n                        })\r\n\r\n                        // pack data\r\n                        const root = d3.pack()\r\n                          .size([size.width, size.height])\r\n                          .padding(1)\r\n                        (d3.hierarchy(chartData)\r\n                          .sum(d => d.value))\r\n                                            \r\n                        // draw background circles\r\n                        svg.append(\"g\")\r\n                            .attr(\"stroke\", \"#ccc\")\r\n                          .selectAll(\"circle\")\r\n                          .data(root.descendants().filter(d => d.height === 1))\r\n                          .join(\"circle\")\r\n                            .attr(\"cx\", d => d.x)\r\n                            .attr(\"cy\", d => d.y)\r\n                            .attr(\"r\", d => d.r)\r\n                            .attr(\"fill\", d => cc_colors[d.data.children[0].threat+2]);\r\n\r\n                        // put packed circles\r\n                        svg.append(\"g\")\r\n                          .selectAll(\"circle\")\r\n                          .data(root.leaves())\r\n                          .join(\"circle\")\r\n                            .attr(\"cx\", d => d.x)\r\n                            .attr(\"cy\", d => d.y)\r\n                            .attr(\"r\", d => d.r)\r\n                            .attr(\"fill\", d => cc_colors[d.data.threat])\r\n                          .append(\"title\")\r\n                            .text(d => `${d.data.name} \\n${d.data.value.toLocaleString('en-US', {\r\n                              style: 'currency',\r\n                              currency: 'USD',\r\n                              minimumFractionDigits: 0,\r\n                              maximumFractionDigits: 0\r\n                            })}`)         \r\n\r\n                        console.log(root.descendants())\r\n\r\n                        console.log(chartData)\r\n                      })\r\n                    })\r\n                })\r\n            } else {\r\n              // print No data\r\n            }\r\n          })\r\n      }\r\n      \r\n      function reset() {\r\n        svg.transition().duration(750).call(\r\n          zoom.transform,\r\n          d3.zoomIdentity,\r\n          d3.zoomTransform(svg.node()).invert([dimensions.width / 2, dimensions.height / 2])\r\n        );\r\n        \r\n        //remove previous circles\r\n        d3.selectAll(\"circle\").remove();\r\n      }\r\n      \r\n      function zoomed(event) {\r\n        const {transform} = event;\r\n        g.attr(\"transform\", transform);\r\n        g.attr(\"stroke-width\", 1 / transform.k);\r\n      }\r\n    }\r\n\r\n    render(){\r\n        return <div id={\"#\" + this.props.id}></div>\r\n    }\r\n}\r\n\r\nexport default Threat_chart;","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\components\\Header.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Alliance.js",["93"],"import React from 'react';\r\nimport Alliance_chart from './Alliance_chart';\r\nimport './Alliance.css';\r\n\r\nclass Alliance extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state ={\r\n      id: \"chart-1\"\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n        <h2>Alliances vs Threats</h2>\r\n        <div id=\"manual\">\r\n          <p>Explore the relative magnitude of military expenditures between the alliance and disputed countries. Considered military disputes from 1991 to 2014 and effective alliances by 2012.</p>\r\n          <p>Click a country to show its information. Blue circles represent alliances and the selected country itself, and red circles represent the countries that had military disputes with the selected one.  The size of each circle shows the relative magnitude of the military expenditure. You can see the names of countries and military expenditures by hovering your mouse on each circle. You can also pan and zoom or click the ocean to reset to the initial state.</p>\r\n        </div>\r\n        <div id=\"container\"> </div>\r\n        <Alliance_chart/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Alliance;\r\n","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Alliance_chart.js",["94","95","96","97","98","99","100","101","102","103","104","105","106","107"],"import React, {Component} from 'react';\r\nimport ccodes from  '../datasets/COW country codes.csv';\r\nimport MIDB from '../datasets/MIDB 5.0.csv';\r\nimport mil from  '../datasets/Military_expenditure.csv';\r\nimport allyDB from '../datasets/alliance_v4.1_by_member.csv';\r\nimport * as d3 from \"d3\";\r\n\r\nclass Alliance_chart extends Component{\r\n\r\n    componentDidMount(){\r\n        this.drawChart();\r\n    }\r\n\r\n    drawChart(){\r\n      // load json file for the map\r\n      const topojson_countries = require('../datasets/countries-110m.json');\r\n      \r\n      const topojson = require(\"topojson\");\r\n      const countries_objects = topojson.feature(topojson_countries, topojson_countries.objects.countries);\r\n      const countries = topojson.feature(topojson_countries, topojson_countries.objects.countries).features;\r\n      const mesh_countries = topojson.mesh(topojson_countries, topojson_countries.objects.countries, function(a, b) { return a !== b; });\r\n\r\n      // size of view box\r\n      const dimensions = ({\r\n        width: 600,\r\n        height: 400,\r\n        margin: 50,\r\n      })\r\n\r\n      // map color\r\n      const colors = ({\r\n        stroke_color: \"white\",\r\n        active_color: \"#2c4566\",\r\n        inactive_color: \"#9daabd\",\r\n        background_color: \"#e4e9f0\",\r\n        tooltip_color: \"#21334f\",\r\n        tooltip_background: \"rgba(237, 244, 255, 0.7)\"\r\n      })\r\n\r\n      // packed circle color\r\n      const cc_colors = [\"#004ecc\", \"#c90000\", \"#c7c9ff\", \"#ffa8a8\"]  // friendly, hostile, friedly_background, hostile_background\r\n\r\n      // size\r\n      const size = ({\r\n        width: 300,\r\n        height: 200\r\n      })\r\n\r\n      // Visualize world map\r\n      var svg = d3.select('#container')\r\n        .append('svg')\r\n          .attr(\"viewBox\", [0, 0, dimensions.width, dimensions.height])\r\n          .attr(\"class\", \"globe\")\r\n          .on(\"click\", reset);\r\n\r\n      svg.append(\"rect\")\r\n        .attr(\"width\", dimensions.width)\r\n        .attr(\"height\", dimensions.height)\r\n        .attr(\"fill\", colors.background_color);\r\n\r\n      var projectionMercator = d3.geoEquirectangular()\r\n                                .translate([dimensions.width / 2, dimensions.height / 2])\r\n                                .rotate([0, 0])\r\n                                .fitSize([dimensions.width, dimensions.height], countries_objects);\r\n                                  // note: use topojson objects (w/ type: FeatureCollection) to fitsize\r\n      \r\n      var geoMercator = d3.geoMercator()\r\n                          .center([0, 0])\r\n                          .fitSize([dimensions.width, dimensions.height], countries);\r\n\r\n      var path = d3.geoPath()\r\n                    .projection(projectionMercator);\r\n      \r\n      const zoom = d3.zoom()\r\n                      .scaleExtent([1, 10])\r\n                      .on(\"zoom\", zoomed);\r\n    \r\n      var g = svg.append(\"g\");\r\n\r\n      var tooltip = d3.select(\"body\").append(\"div\")\r\n        .attr(\"class\", \"tooltip\")\r\n    \r\n      g.selectAll(\"path\")\r\n        .data(countries)\r\n        .enter().append(\"path\")\r\n        .attr(\"d\", path)\r\n        .style(\"fill\", colors.inactive_color)\r\n        .attr(\"class\", \"country\")\r\n        .on(\"click\", clicked)\r\n        .on('mouseenter', function(event, d) { \r\n          d3.select(this)\r\n            .transition()\r\n            .delay(100)\r\n            .style(\"fill\", colors.active_color);\r\n          tooltip.html(\r\n              `<div><strong> ${d.properties.name}</strong></div>`)\r\n                .style('visibility', 'visible');\r\n        })\r\n        .on('mouseleave', function(d) { \r\n          d3.select(this)\r\n            .transition()\r\n            .delay(100)\r\n            .style(\"fill\", colors.inactive_color);\r\n          tooltip.html(``).style('visibility', 'hidden');\r\n        })     \r\n        .on('mousemove', function (event, d) {\r\n              tooltip\r\n                .style('top', event.pageY - 10 + 'px')\r\n                .style('left', event.pageX + 10 + 'px');\r\n        });\r\n      \r\n        g.append(\"path\")\r\n          .data(mesh_countries)\r\n          .attr(\"class\", \"mesh\")\r\n          .attr('stroke-linejoin', 'round')\r\n          .style(\"stroke\", colors.stroke_color)\r\n          .style(\"stroke-width\", \"1px\")\r\n          .attr(\"d\", path);\r\n    \r\n      svg.call(zoom);\r\n\r\n      function clicked(event, d) {\r\n        const [[x0, y0], [x1, y1]] = path.bounds(d);\r\n        event.stopPropagation();\r\n\r\n        //remove previous circles\r\n        d3.selectAll(\"circle\").remove();\r\n\r\n        var ccode = 0\r\n        var found = false\r\n\r\n        svg.transition().duration(750).call(\r\n          zoom.transform,\r\n          d3.zoomIdentity\r\n            .translate(dimensions.width / 2, dimensions.height / 2)\r\n            .scale(Math.min(3, 0.9 / Math.max((x1 - x0) / dimensions.width, (y1 - y0) / dimensions.height)))\r\n            .translate(-(x0 + x1) / 2, -(y0 + y1) / 2),\r\n        );\r\n\r\n        /// start preprocessing ///\r\n        // load ccodes data\r\n        d3.csv(ccodes)\r\n          .then(csv => {\r\n            var codemap_dup = csv.map(row => {\r\n              return {\r\n                name: String(row['StateNme']),\r\n                code: String(row['CCode'])\r\n              }\r\n              })\r\n            \r\n            // remove duplicate codes\r\n            var codemap = codemap_dup.reduce((unique, o) => {\r\n              if(!unique.some(obj => obj.name === o.name && obj.code === o.code)) {\r\n                unique.push(o);\r\n              }\r\n              return unique;\r\n            },[]);\r\n\r\n            // find ccode of selected\r\n            codemap.forEach(country =>{\r\n              if (country.name === d.properties.name) {\r\n                found = true\r\n                ccode = country.code\r\n              }\r\n            })\r\n            if (found){\r\n              // search dispute dataset\r\n              d3.csv(MIDB)\r\n                .then(csv =>{\r\n\r\n                  // select meaningful columns\r\n                  var disputes = csv.map(row => {\r\n                    return {\r\n                      dispnum: Number(row['dispnum']),\r\n                      ccode: Number(row['ccode']),\r\n                      styear: Number(row['styear'])\r\n                    }\r\n                  })\r\n\r\n                  // get disputes of the selected country\r\n                  var sel_disp = []                  \r\n\r\n                  disputes.forEach(disp => {\r\n                    if (disp.ccode == ccode && disp.styear > 1990){   // filter disputes after 1990\r\n                      sel_disp.push(disp.dispnum)\r\n                    }\r\n                  })\r\n\r\n                  // get ccodes of hostile countries\r\n                  var threats = new Set()\r\n                  disputes.forEach(disp =>{\r\n                    if (sel_disp.includes(disp.dispnum) && disp.ccode != ccode){\r\n                      threats.add(disp.ccode)\r\n                    }\r\n                  })\r\n\r\n                  // get military expenditure of selected country and threats\r\n                  d3.csv(mil)\r\n                    .then(csv => {             \r\n                      // create data by selecting two columns from csv \r\n                      var entire_mil_exp = csv.map(row => {\r\n                        return {\r\n                          name: String(row['Name']),\r\n                          mil: Number(row['2018'])\r\n                        }\r\n                      })\r\n\r\n                      var formattedData = []\r\n                      // add the selected county itself to formatted data\r\n                      codemap.forEach(cd => {\r\n                        if (ccode == cd.code){\r\n                          // get military expenditure\r\n                          entire_mil_exp.forEach(dat =>{\r\n                            if (dat.name == cd.name) {\r\n                              // add item to chart data\r\n                              formattedData.push({\r\n                                threat: 0,   // not threat, that is, friendly\r\n                                value: dat.mil,\r\n                                name: cd.name\r\n                              })  \r\n                            }\r\n                          })\r\n                        }\r\n                      })\r\n\r\n                      // search alliance dataset\r\n                      d3.csv(allyDB)\r\n                      .then(csv =>{\r\n                        // select meaningful columns\r\n                        var allianceDB_raw = csv.map(row => {\r\n                          return {\r\n                            allyID: Number(row['version4id']),\r\n                            ccode: Number(row['ccode']),\r\n                            styear: Number(row['all_st_year']),\r\n                            type: String(row['ss_type']),\r\n                            endyear: Number(row['all_end_year'])\r\n                          }\r\n                        });\r\n\r\n                        function filter_effective(array) {\r\n                          var effectives = array.filter(alliance => alliance.endyear == \"\")\r\n                          var mutual_defense = effectives.filter(alliance => alliance.type == \"Type I: Defense Pact\" || alliance.type == \"Type III: Entente\")\r\n                          return mutual_defense;\r\n                          }\r\n                        \r\n                        // filter still effective and about mutual defense alliances\r\n                        var allianceDB_dup = filter_effective(allianceDB_raw);\r\n                        \r\n                        // remove duplicate data\r\n                        var allianceDB = allianceDB_dup.reduce((unique, o) => {\r\n                          if(!unique.some(obj => obj.allyID === o.allyID && obj.ccode === o.ccode)) {\r\n                            unique.push(o);\r\n                          }\r\n                          return unique;\r\n                        },[]);\r\n\r\n                        console.log(allianceDB)\r\n                        \r\n                        // get alliances of selected country\r\n                        var sel_alli = [];\r\n\r\n                        allianceDB.forEach(alli => {\r\n                          if (alli.ccode == ccode){\r\n                            sel_alli.push(alli.allyID)\r\n                          }\r\n                        })\r\n\r\n                        console.log(sel_alli)\r\n\r\n                        // get ccode of allied countries\r\n                        var alliances = new Set();\r\n                        allianceDB.forEach(alli => {\r\n                          if (sel_alli.includes(alli.allyID) && alli.ccode != ccode){\r\n                            alliances.add(alli.ccode)\r\n                          }  \r\n                        })\r\n\r\n                        console.log(alliances)\r\n\r\n                        // for each allied country\r\n                        alliances.forEach(country =>{\r\n                          // map ccode to name\r\n                          codemap.forEach(cd => {\r\n                            if (country == cd.code){\r\n                              // get military expenditure\r\n                              entire_mil_exp.forEach(dat =>{\r\n                                if (dat.name == cd.name) {\r\n                                  // add item to formatted data\r\n                                  formattedData.push({\r\n                                    threat: 0,\r\n                                    value: dat.mil,\r\n                                    name: cd.name\r\n                                  })  \r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        })  \r\n\r\n                        // for each threat country\r\n                        threats.forEach(country =>{                        \r\n                          // map ccode to name\r\n                          codemap.forEach(cd => {\r\n                            if (country == cd.code){\r\n                              // get military expenditure\r\n                              entire_mil_exp.forEach(dat =>{\r\n                                var hostile = true \r\n                                formattedData.forEach(friendly => {\r\n                                  // don't add friendly countries to threats\r\n                                  if (Object.values(friendly).includes(dat.name)){ \r\n                                    hostile = false\r\n                                  }\r\n                                })\r\n                                if (dat.name == cd.name && hostile) {\r\n                                  // add item to formatted data\r\n                                  formattedData.push({\r\n                                    threat: 1,\r\n                                    value: dat.mil,\r\n                                    name: cd.name\r\n                                  })  \r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        })\r\n\r\n                        // convert to chart data format\r\n                        var chartData = ({\r\n                          children: Array.from(\r\n                            d3.group(\r\n                              formattedData,\r\n                              d => d.threat\r\n                            ),\r\n                            ([, children]) => ({children})\r\n                          )\r\n                        })\r\n\r\n                        // pack data\r\n                        const root = d3.pack()\r\n                          .size([size.width, size.height])\r\n                          .padding(1)\r\n                        (d3.hierarchy(chartData)\r\n                          .sum(d => d.value))\r\n                                            \r\n                        // draw background circles\r\n                        svg.append(\"g\")\r\n                            .attr(\"stroke\", \"#ccc\")\r\n                          .selectAll(\"circle\")\r\n                          .data(root.descendants().filter(d => d.height === 1))\r\n                          .join(\"circle\")\r\n                            .attr(\"cx\", d => d.x)\r\n                            .attr(\"cy\", d => d.y)\r\n                            .attr(\"r\", d => d.r)\r\n                            .attr(\"fill\", d => cc_colors[d.data.children[0].threat+2]);\r\n\r\n                        // put packed circles\r\n                        svg.append(\"g\")\r\n                          .selectAll(\"circle\")\r\n                          .data(root.leaves())\r\n                          .join(\"circle\")\r\n                            .attr(\"cx\", d => d.x)\r\n                            .attr(\"cy\", d => d.y)\r\n                            .attr(\"r\", d => d.r)\r\n                            .attr(\"fill\", d => cc_colors[d.data.threat])\r\n                          .append(\"title\")\r\n                            .text(d => `${d.data.name} \\n${d.data.value.toLocaleString('en-US', {\r\n                              style: 'currency',\r\n                              currency: 'USD',\r\n                              minimumFractionDigits: 0,\r\n                              maximumFractionDigits: 0\r\n                            })}`) \r\n\r\n                        console.log(chartData)                      \r\n                      });\r\n                    })\r\n                })\r\n            } else {\r\n              // print No data\r\n            }\r\n          })\r\n      }\r\n      \r\n      function reset() {\r\n        svg.transition().duration(750).call(\r\n          zoom.transform,\r\n          d3.zoomIdentity,\r\n          d3.zoomTransform(svg.node()).invert([dimensions.width / 2, dimensions.height / 2])\r\n        );\r\n        \r\n        //remove previous circles\r\n        d3.selectAll(\"circle\").remove();\r\n      }\r\n      \r\n      function zoomed(event) {\r\n        const {transform} = event;\r\n        g.attr(\"transform\", transform);\r\n        g.attr(\"stroke-width\", 1 / transform.k);\r\n      }\r\n    }\r\n\r\n    render(){\r\n        return <div id={\"#\" + this.props.id}></div>\r\n    }\r\n}\r\n\r\nexport default Alliance_chart;","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Total_alliance.js",["108"],"import React from 'react';\r\nimport Total_alliance_chart from './Total_alliance_chart';\r\nimport './Total_alliance.css';\r\n\r\nclass Total_alliance extends React.Component{\r\n    constructor(props){\r\n      super(props);\r\n      this.state ={\r\n        id: \"chart-1\"\r\n      }\r\n    }\r\n  \r\n    render(){\r\n      return (\r\n        <div className=\"App\">\r\n            <h2>Global Cooperations</h2>\r\n              <div id=\"manual\">\r\n               <p>Explore formal alliances among countries effective by 2012.</p>\r\n               <p>Light-blue colored packing circles represent each alliance, and the blue circles in them represent the associated countries. The size of each blue circle shows the relative magnitude of the military expenditure of that country. You can zoom into a specific alliance for detailed view with a click, and zoom out if you click it again.</p>\r\n              </div>\r\n            <div id=\"container\"> </div>\r\n            <Total_alliance_chart/>\r\n        </div>\r\n      );\r\n    }\r\n  \r\n  }\r\n  \r\n  export default Total_alliance;\r\n  ","C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Total_alliance_chart.js",["109","110","111","112","113","114","115","116"],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\GDP.js",["117"],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Area.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\Area2.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\AreaChart.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\GDP_chart.js",[],"C:\\Users\\pjin2\\Documents\\GitHub\\ECS272-Winter2021\\FinalProject\\group9\\src\\routes\\AreaChart2.js",[],{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","replacedBy":"121"},{"ruleId":"122","severity":1,"message":"123","line":24,"column":9,"nodeType":"124","endLine":24,"endColumn":24},{"ruleId":"125","severity":1,"message":"126","line":67,"column":11,"nodeType":"127","messageId":"128","endLine":67,"endColumn":22},{"ruleId":"129","severity":1,"message":"130","line":184,"column":36,"nodeType":"131","messageId":"132","endLine":184,"endColumn":38},{"ruleId":"129","severity":1,"message":"133","line":192,"column":71,"nodeType":"131","messageId":"132","endLine":192,"endColumn":73},{"ruleId":"129","severity":1,"message":"130","line":211,"column":35,"nodeType":"131","messageId":"132","endLine":211,"endColumn":37},{"ruleId":"129","severity":1,"message":"130","line":214,"column":42,"nodeType":"131","messageId":"132","endLine":214,"endColumn":44},{"ruleId":"129","severity":1,"message":"130","line":241,"column":86,"nodeType":"131","messageId":"132","endLine":241,"endColumn":88},{"ruleId":"129","severity":1,"message":"130","line":242,"column":92,"nodeType":"131","messageId":"132","endLine":242,"endColumn":94},{"ruleId":"129","severity":1,"message":"130","line":242,"column":135,"nodeType":"131","messageId":"132","endLine":242,"endColumn":137},{"ruleId":"129","severity":1,"message":"130","line":263,"column":42,"nodeType":"131","messageId":"132","endLine":263,"endColumn":44},{"ruleId":"129","severity":1,"message":"133","line":273,"column":76,"nodeType":"131","messageId":"132","endLine":273,"endColumn":78},{"ruleId":"129","severity":1,"message":"130","line":285,"column":41,"nodeType":"131","messageId":"132","endLine":285,"endColumn":43},{"ruleId":"129","severity":1,"message":"130","line":288,"column":46,"nodeType":"131","messageId":"132","endLine":288,"endColumn":48},{"ruleId":"129","severity":1,"message":"130","line":305,"column":41,"nodeType":"131","messageId":"132","endLine":305,"endColumn":43},{"ruleId":"129","severity":1,"message":"130","line":315,"column":46,"nodeType":"131","messageId":"132","endLine":315,"endColumn":48},{"ruleId":"122","severity":1,"message":"134","line":22,"column":9,"nodeType":"124","endLine":22,"endColumn":26},{"ruleId":"125","severity":1,"message":"126","line":67,"column":11,"nodeType":"127","messageId":"128","endLine":67,"endColumn":22},{"ruleId":"129","severity":1,"message":"130","line":184,"column":36,"nodeType":"131","messageId":"132","endLine":184,"endColumn":38},{"ruleId":"129","severity":1,"message":"133","line":192,"column":71,"nodeType":"131","messageId":"132","endLine":192,"endColumn":73},{"ruleId":"129","severity":1,"message":"130","line":211,"column":35,"nodeType":"131","messageId":"132","endLine":211,"endColumn":37},{"ruleId":"129","severity":1,"message":"130","line":214,"column":42,"nodeType":"131","messageId":"132","endLine":214,"endColumn":44},{"ruleId":"129","severity":1,"message":"130","line":241,"column":86,"nodeType":"131","messageId":"132","endLine":241,"endColumn":88},{"ruleId":"129","severity":1,"message":"130","line":242,"column":92,"nodeType":"131","messageId":"132","endLine":242,"endColumn":94},{"ruleId":"129","severity":1,"message":"130","line":242,"column":135,"nodeType":"131","messageId":"132","endLine":242,"endColumn":137},{"ruleId":"129","severity":1,"message":"130","line":263,"column":42,"nodeType":"131","messageId":"132","endLine":263,"endColumn":44},{"ruleId":"129","severity":1,"message":"133","line":273,"column":76,"nodeType":"131","messageId":"132","endLine":273,"endColumn":78},{"ruleId":"129","severity":1,"message":"130","line":284,"column":41,"nodeType":"131","messageId":"132","endLine":284,"endColumn":43},{"ruleId":"129","severity":1,"message":"130","line":287,"column":46,"nodeType":"131","messageId":"132","endLine":287,"endColumn":48},{"ruleId":"129","severity":1,"message":"130","line":304,"column":41,"nodeType":"131","messageId":"132","endLine":304,"endColumn":43},{"ruleId":"129","severity":1,"message":"130","line":314,"column":46,"nodeType":"131","messageId":"132","endLine":314,"endColumn":48},{"ruleId":"122","severity":1,"message":"135","line":22,"column":13,"nodeType":"124","endLine":22,"endColumn":36},{"ruleId":"129","severity":1,"message":"130","line":58,"column":74,"nodeType":"131","messageId":"132","endLine":58,"endColumn":76},{"ruleId":"129","severity":1,"message":"130","line":59,"column":80,"nodeType":"131","messageId":"132","endLine":59,"endColumn":82},{"ruleId":"129","severity":1,"message":"130","line":59,"column":123,"nodeType":"131","messageId":"132","endLine":59,"endColumn":125},{"ruleId":"129","severity":1,"message":"130","line":94,"column":35,"nodeType":"131","messageId":"132","endLine":94,"endColumn":37},{"ruleId":"129","severity":1,"message":"130","line":97,"column":38,"nodeType":"131","messageId":"132","endLine":97,"endColumn":40},{"ruleId":"129","severity":1,"message":"130","line":100,"column":38,"nodeType":"131","messageId":"132","endLine":100,"endColumn":40},{"ruleId":"125","severity":1,"message":"136","line":130,"column":19,"nodeType":"127","messageId":"128","endLine":130,"endColumn":25},{"ruleId":"125","severity":1,"message":"137","line":193,"column":21,"nodeType":"127","messageId":"128","endLine":193,"endColumn":27},{"ruleId":"122","severity":1,"message":"138","line":33,"column":9,"nodeType":"124","endLine":33,"endColumn":97},"no-native-reassign",["139"],"no-negated-in-lhs",["140"],"react/jsx-pascal-case","Imported JSX component Threat_chart must be in PascalCase or SCREAMING_SNAKE_CASE","JSXOpeningElement","no-unused-vars","'geoMercator' is assigned a value but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","Imported JSX component Alliance_chart must be in PascalCase or SCREAMING_SNAKE_CASE","Imported JSX component Total_alliance_chart must be in PascalCase or SCREAMING_SNAKE_CASE","'format' is assigned a value but never used.","'focus0' is assigned a value but never used.","Imported JSX component GDP_chart must be in PascalCase or SCREAMING_SNAKE_CASE","no-global-assign","no-unsafe-negation"]